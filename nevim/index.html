<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
          <link rel="stylesheet" href="./css/style.css">
    <title>XDDD
    </title>
</head>
<body>
    <div id="main">
    <h1>Translate it lol</h1>
    <p>Ta animace pak skočí kam má.. Neboj</p>
    <form id="translation-form">
        <textarea id="input-text"></textarea>
        <br>
        <input type="radio" id="to-normal" name="direction" value="to-normal">
        <label for="to-normal">Translate to normal language</label>
        <br>
        <input type="radio" id="to-secret" name="direction" value="to-secret">
        <label for="to-secret">Translate to secret language</label>
        <br>
        <button type="submit">Translate</button>
      </form>
      <br>
      <div id="output-text"></div>
    </div>
<script>
const form = document.getElementById("translation-form");
const input = document.getElementById("input-text");
const output = document.getElementById("output-text");

form.addEventListener("submit", event => {
  event.preventDefault();
  const direction = document.querySelector('input[name="direction"]:checked').value;
  const translatedText = translate(input.value, direction === "to-secret");
  let i = 0;
  output.textContent = "";
  const intervalId = setInterval(() => {
    output.textContent += translatedText[i];
    i++;
    if (i >= translatedText.length) {
      clearInterval(intervalId);
      output.classList.add("translated");
    }
  }, 50);
});
const secretAlphabet = {
  a: "♫",
  á: "◘",
  b: "♡",
  c: "▓",
  č: "▒",
  d: "❥",
  ď: "∟",
  e: "✿",
  é: "○",
  ě: "C",
  f: "❀",
  g: "✾",
  h: "✽",
  i: "✺",
  í: "Q",
  j: "✹",
  k: "✸",
  l: "✷",
  m: "✶",
  n: "✵",
  o: "█",
  ó: "˘",
  p: "Ű",
  q: "✲",
  r: "✱",
  ř: "O",
  s: "✰",
  š: "ľ",
  t: "✯",
  ť: "←",
  u: "✮",
  ů: "↓",
  ú: "→",
  v: "✭",
  w: "✬",
  x: "✫",
  y: "✪",
  ý: "Ţ",
  z: "✩",
  ž: "'",
};

function translate(str, toSecret) {
  let output = "";
  for (let i = 0; i < str.length; i++) {
    const ch = str[i];
    if (ch === " ") {
      output += " ";
    } else if (ch === ",") {
      output += ",";
    } else if (ch === ".") {
      output += ".";
    } else if (toSecret) {
      output += secretAlphabet[ch.toLowerCase()] || ch;
    } else {
      for (const key in secretAlphabet) {
        if (secretAlphabet[key] === ch) {
          output += key;
          break;
        }
      }
    }
  }
  return output;
}
</script>
</body>

</html>